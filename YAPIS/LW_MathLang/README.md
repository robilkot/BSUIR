# Компилятор языка MathLang

## Примеры работы компилятора

В папке samples представлены примеры исходного кода и полученных исполняемых файлов, а также промежуточного кода на WAT. 

Описания примеров:

- sample1: запрашивает у пользователя катеты прямоугольного треугольника, рассчитывает гипотенузу и другие характеристики треугольника
- sample2: рассчитывает значения составного тригонометрического выражения, аппроксимирует значение аргумента по значению функции с заданной точностью. Проверяет аксиому (sin^2(x) + cos^2(x) = 1)
- sample4: решает квадратное уравнение с заданными коэффициентами методом дискриминанта. Проверяет вычисленные решения.
- sample6: рекурсивно возводит число в степень до достижения порога. Выводит сообщения при каждом вызове.
- sample7: шаблонная рекурсивная подпрограмма, с каждым вызовом инкрементирующая аргументы, переданные по ссылке. Порядок аргументов с каждым вызовом меняется для проверки корректности разрешения шаблонов.
- sample8: песочница, повторяет другие примеры
- samples_templates: песочница для шаблонных подпрограмм, содержит все виды ошибок и примеры использования шаблонов
- samples_templates_correct.ml: аналогично предыдущему, но без ошибок
## Установка и запуск

В репозиторий залита зависимость wabt-1.0.39 для компиляции WAT в WASM. Для запуска на ОС кроме Linux необходимо вручную скачать нужную версию из репозитория разработчиков: https://github.com/WebAssembly/wabt/releases 

Установите зависимости для Python.
```
./setup.sh
```
Запустите toolchain на файле с кодом MathLang.
```
source .venv/bin/activate
python toolchain.py samples/sample1.ml
```
Toolchain сгенерирует исполняемые файлы на WASM + JS, а также промежуточный код на WAT.
В случае ошибок компиляция остановится, будут выведены сообщения об ошибках.

Для запуска исполняемых файлов рекомендуется использовать node.js. Для корректной работы ввода через терминал требуются зависимости.

Установите зависимости для JS.
```
npm install
```
Запустите сгенерированный исполняемый файл.
```
node samples/sample1.js
```

Готово!