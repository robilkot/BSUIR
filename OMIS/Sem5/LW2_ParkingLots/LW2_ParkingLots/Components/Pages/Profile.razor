@page "/"

@using LW2_ParkingLots.Model.Persistence
@using LW2_ParkingLots.Model.Services
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Identity

@* @attribute [Authorize] *@

<PageTitle>Profile</PageTitle>

@inject NavigationManager Navigation
@inject IProfileService _profileService

<div>
    <div class="layout-rectangle1" style="float: left; width: 60%">
        <div class="rectangle1" style="height: 1rem"></div>
        <div class="layout-rectangle1">
            <label>Номер телефона</label>
            <p>@user.PhoneNumber</p>
        </div>

        <div class="rectangle1" style="height: 1rem"></div>
        <div class="layout-rectangle1">
            <label>Email</label>
            <p>@user.Email</p>
        </div>

        <div class="rectangle1" style="height: 1rem"></div>
        <div class="layout-rectangle1">
            <label>Имя</label>
            <p>@user.FullName</p>
        </div>
    </div>
    <div class="layout-rectangle1" style="float: left; width: 40%">
        <div class="rectangle1" style="height: 30rem; padding: 2rem">
            <img src="user.jpg" width="150" height="150" style="margin: auto;  display: block" />
        </div>
    </div>
</div>

@code {
    [CascadingParameter]
    private HttpContext HttpContext { get; set; } = default!;

    private ApplicationUser user;

    private async Task GoToHistory()
    {
        Navigation.NavigateTo("/history");
    }

    protected override async Task OnInitializedAsync()
    {
        user = await _profileService.GetUserAsync(0);
    }
}