title Написание отзыва о локации

actor Пользователь
boundary Контроллер авторизации
control Сервис авторизации
database БД Авторизации
boundary Контроллер локаций
control Сервис локаций
control Сервис мероприятий
boundary Контроллер отзывов
control Сервис отзывов
database БД Сервисов

activate Пользователь

group Авторизация

Пользователь->Контроллер авторизации:Ввод данных авторизации
activate Контроллер авторизации
Пользователь->Контроллер авторизации:Запрос авторизации
Контроллер авторизации->Сервис авторизации:Запрос авторизации
activate Сервис авторизации
database БД Авторизации
Сервис авторизации->БД Авторизации:Запрос данных\nпользователя
activate БД Авторизации
Сервис авторизации<--БД Авторизации:Данные пользователя
deactivate БД Авторизации
Сервис авторизации->Сервис авторизации:Проверка данных\nпользователя
Сервис авторизации-->Контроллер авторизации:Доступ запрещен
Контроллер авторизации-->Пользователь:Запрос повторного\nввода данных

Сервис авторизации-->Контроллер авторизации:Доступ разрешен,\nотправка токена\nавторизации
deactivate Сервис авторизации
Контроллер авторизации-->Пользователь:отправка токена авторизации\nи перенаправление\nна страницу локаций
deactivate Контроллер авторизации

end


group Получение списка локаций

Пользователь->Контроллер локаций:Запрос списка локаций
activate Контроллер локаций
Контроллер локаций->Контроллер локаций:Проверка токена\nавторизации

Контроллер локаций-->Пользователь:Токен некорректный,\nперенаправление на\nстраницу авторизации

Контроллер локаций->Сервис локаций:Запрос списка\nлокаций
activate Сервис локаций

Сервис локаций->БД Сервисов:Запрос списка локаций
activate БД Сервисов
БД Сервисов-->Сервис локаций:Список локаций
deactivate БД Сервисов
Сервис локаций->Сервис мероприятий:Запрос ближайшего\nмероприятия для\nкаждой локации
activate Сервис мероприятий


Сервис мероприятий->БД Сервисов: Запрос ближайших мероприятий для локаций
activate БД Сервисов
БД Сервисов-->Сервис мероприятий:Список ближайших мероприятий
deactivate БД Сервисов

Сервис локаций<--Сервис мероприятий:Ближайшие\nмероприятия\nдля локаций

deactivate Сервис мероприятий
Контроллер локаций<--Сервис локаций:Список локаций
deactivate Сервис локаций
Контроллер локаций-->Пользователь:Список локаций
deactivate Контроллер локаций

end

group Получение локации

Пользователь->Контроллер локаций:Запрос локации
activate Контроллер локаций
Контроллер локаций->Контроллер локаций:Проверка токена\nавторизации

Контроллер локаций-->Пользователь:Токен некорректный,\nперенаправление на\nстраницу авторизации

Контроллер локаций->Сервис локаций:Запрос\nлокации
activate Сервис локаций

Сервис локаций->Сервис мероприятий:Запрос ближайшего\nмероприятия для\nлокации
activate Сервис мероприятий

Сервис мероприятий->БД Сервисов: Запрос ближайшего мероприятия для локации
activate БД Сервисов
БД Сервисов-->Сервис мероприятий:Ближайшее мероприятие\nдля локации
deactivate БД Сервисов

Сервис локаций<--Сервис мероприятий:Ближайшие\nмероприятия\nдля локаций
deactivate Сервис мероприятий

Сервис локаций->Сервис отзывов:Запрос отзывов\nдля локации
activate Сервис отзывов

Сервис отзывов->БД Сервисов: Запрос отзывов для локации
activate БД Сервисов
БД Сервисов-->Сервис отзывов:Отзывы\nдля локации
deactivate БД Сервисов

Сервис отзывов-->Сервис локаций:Отзывы\nдля локации
deactivate Сервис отзывов

Контроллер локаций<--Сервис локаций:Локация
deactivate Сервис локаций
Контроллер локаций-->Пользователь:Локация
deactivate Контроллер локаций

end


Пользователь->Контроллер отзывов:Запрос на добавление отзыва к локации
activate Контроллер отзывов
Контроллер отзывов->Контроллер отзывов:Проверка токена\nавторизации

Контроллер отзывов->Сервис отзывов:Запрос на\nдобавление отзыва\nк локации
activate Сервис отзывов


Сервис отзывов->БД Сервисов:Новый отзыв\nдля локации
activate БД Сервисов
БД Сервисов-->Сервис отзывов:Отзыв успешно добавлен
deactivate БД Сервисов

Сервис отзывов-->Контроллер отзывов:Отзыв успешно\nдобавлен

deactivate Сервис отзывов

Контроллер отзывов-->Пользователь:Токен некорректный,\nперенаправление на\nстраницу авторизации
Контроллер отзывов-->Пользователь:Сообщение об успешном добавлении отзыва
deactivate Контроллер отзывов
deactivate Пользователь